/* Color palette */
:root {
  --accent: #b39ddb; /* light purple */
  --accent-hover: #9575cd; /* slightly darker light purple */
  --background: #111015; /* black */
  --background-secondary: #18171d; /* slightly lighter black */
  --background-tertiary: #232129; /* for chat area */
  --text: #fff;
  --text-secondary: #d1c4e9;
  --border: #2e2b36;
  --shadow: rgba(179, 157, 219, 0.08);
  --online: #7ed957;
}

/* Reset and base styles */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
body {
  font-family: 'Segoe UI', Arial, sans-serif;
  background: var(--background);
  color: var(--text);
  height: 100vh;
}
.app-container {
  display: flex;
  height: 100vh;
  width: 100vw;
}

/* Sidebar (Servers) */
.sidebar {
  background: var(--background-secondary);
  width: 72px;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 16px 0;
  box-shadow: 2px 0 8px var(--shadow);
}
.logo {
  background: var(--accent);
  color: var(--text);
  font-size: 2rem;
  font-weight: bold;
  width: 48px;
  height: 48px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 24px;
  box-shadow: 0 2px 8px var(--shadow);
}
.server-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 16px;
}
.add-server {
  margin-top: auto;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--accent);
  color: var(--text);
  border: none;
  font-size: 2rem;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 2px 8px var(--shadow);
  transition: background 0.2s, transform 0.2s;
}
.add-server:hover {
  background: var(--accent-hover);
  transform: scale(1.08);
}

/* Channels */
.channels {
  background: var(--background-tertiary);
  width: 220px;
  padding: 24px 0 24px 16px;
  display: flex;
  flex-direction: column;
  box-shadow: 2px 0 8px var(--shadow);
  position: relative;
}
.channels-header {
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 18px;
  color: var(--text-secondary);
}
.channel-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Main Chat */
.chat {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: var(--background-tertiary);
  border-radius: 18px;
  box-shadow: 0 2px 16px var(--shadow);
  overflow: hidden;
  min-height: 0;
  position: relative;
}
.chat-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 18px 24px;
  background: var(--background-secondary);
  border-bottom: 1px solid var(--border);
  position: relative;
}
.chat-header h2 {
  font-size: 1.3rem;
  font-weight: 600;
}
.chat-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  position: relative;
}
.chat-actions button {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 1.2rem;
  margin-left: 12px;
  cursor: pointer;
  transition: color 0.2s;
}
.chat-actions button:hover {
  color: var(--accent);
}
.messages {
  flex: 1;
  padding: 24px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 18px;
}

.chat-input {
  display: flex;
  align-items: center;
  padding: 16px 24px;
  background: var(--background-secondary);
  border-top: 1px solid var(--border);
  gap: 12px;
}
.chat-input input[type="text"] {
  flex: 1;
  padding: 12px 16px;
  border-radius: 8px;
  border: none;
  background: var(--background-tertiary);
  color: var(--text);
  font-size: 1rem;
  outline: none;
  transition: background 0.2s;
}
.chat-input input[type="text"]:focus {
  background: var(--background);
}
.chat-input button {
  background: var(--accent);
  color: var(--text);
  border: none;
  border-radius: 8px;
  padding: 10px 20px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}
.chat-input button:hover {
  background: var(--accent-hover);
}

/* User Profile */
.user-profile {
  background: var(--background);
  width: 320px;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0 0 0 0;
  box-shadow: -2px 0 8px var(--shadow);
  border-radius: 0;
  position: relative;
  min-width: 260px;
  height: 100vh;
  justify-content: flex-start;
}
.profile-banner-container {
  width: 100%;
  height: 110px;
  background: var(--background-tertiary);
  border-radius: 0;
  position: relative;
  overflow: visible;
}
.profile-banner,
.profile-banner-video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
  z-index: 1;
  background: transparent;
}
.profile-avatar-wrapper {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: -48px;
  margin-bottom: 8px;
  z-index: 999;

}
.profile-avatar-circle {
  width: 96px;
  height: 96px;
  background: var(--background);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  box-shadow: 0 2px 8px var(--shadow);
  z-index: 999;

}
.profile-avatar {
  width: 88px;
  height: 88px;
  border-radius: 50%;
  object-fit: cover;
  background: var(--background-tertiary);
  display: block;
  z-index: 999;
}
.change-avatar-btn {
  position: absolute;
  right: -6px;
  bottom: -6px;
  background: var(--accent);
  color: var(--text);
  border: none;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  cursor: pointer;
  box-shadow: 0 2px 8px var(--shadow);
  transition: background 0.2s;
  z-index: 9999999;
}
.change-avatar-btn:hover {
  background: var(--accent-hover);
}
.profile-main-info {
  width: 90%;
  margin: 0 auto 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}
.profile-name-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 2px;
}
.profile-name {
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--text);
}
.edit-name-btn {
  background: var(--background-tertiary);
  color: var(--accent);
  border: none;
  border-radius: 6px;
  padding: 4px 8px;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
}
.edit-name-btn:hover {
  background: var(--accent);
  color: var(--text);
}
.profile-id-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}
.profile-id {
  font-size: 1rem;
  color: var(--text-secondary);
  background: var(--background-tertiary);
  border-radius: 6px;
  padding: 2px 8px;
}
.copy-id-btn {
  background: var(--background-tertiary);
  color: var(--accent);
  border: none;
  border-radius: 6px;
  padding: 4px 8px;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
}
.copy-id-btn:hover {
  background: var(--accent);
  color: var(--text);
}
.profile-bio-row {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  width: 100%;
  margin-bottom: 8px;
  position: relative;
}
.profile-bio-editable {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  background: var(--background-tertiary);
  border-radius: 8px;
  padding: 10px 14px;
  min-height: 40px;
  margin-bottom: 6px;
  position: relative;
}
.profile-bio {
  width: 100%;
  color: var(--text-secondary);
  font-size: 1rem;
  background: transparent;
  border: none;
  padding: 0;
  margin: 0;
  min-height: 20px;
  word-break: break-word;
}
.profile-bio-input {
  width: 100%;
  min-height: 40px;
  font-size: 1rem;
  border-radius: 6px;
  border: 1.5px solid var(--border);
  background: var(--background);
  color: var(--text);
  padding: 8px 10px;
  margin-top: 2px;
  outline: none;
  resize: vertical;
  transition: border 0.2s, box-shadow 0.2s;
  box-sizing: border-box;
}
.profile-bio-row .edit-bio-btn,
.profile-bio-row .save-bio-btn,
.profile-bio-row .cancel-bio-btn {
  margin-top: 6px;
  margin-right: 6px;
  display: inline-block;
  vertical-align: middle;
}
.profile-bio-row .save-bio-btn,
.profile-bio-row .cancel-bio-btn {
  margin-left: 0;
}
.profile-bio-row .edit-bio-btn {
  margin-left: 0;
}
.profile-bio-row .save-bio-btn.show,
.profile-bio-row .cancel-bio-btn.show {
  display: inline-block !important;
}
.profile-actions {
  width: 90%;
  margin: 18px auto 0 auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
  align-items: center;
}
.view-full-profile-btn {
  width: 100%;
  background: var(--background-tertiary);
  color: var(--accent);
  border: none;
  border-radius: 8px;
  padding: 10px 0;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
}
.view-full-profile-btn:hover {
  background: var(--accent);
  color: var(--text);
}
.delete-account-btn {
  width: 100%;
  background: #ff4d4f;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 10px 0;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}
.delete-account-btn:hover {
  background: #d9363e;
}
.delete-caution {
  width: 100%;
  color: #ffb84d;
  font-size: 0.95rem;
  text-align: center;
  margin-top: 2px;
}
.logout-account-btn {
  width: 100%;
  background: var(--background-tertiary);
  color: var(--accent);
  border: none;
  border-radius: 8px;
  padding: 10px 0;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
}
.logout-account-btn:hover {
  background: var(--accent);
  color: var(--text);
}
.join-server-btn {
  width: 100%;
  background: var(--background-tertiary);
  color: var(--accent);
  border: none;
  border-radius: 8px;
  padding: 10px 0;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
}
.join-server-btn:hover {
  background: var(--accent);
  color: var(--text);
}

/* Responsive */
@media (max-width: 1100px) {
  .user-profile {
    display: none;
  }
}
@media (max-width: 900px) {
  .channels {
    display: none;
  }
  .chat {
    margin: 0;
    border-radius: 0;
  }
}
@media (max-width: 700px) {
  .sidebar {
    width: 56px;
  }
  .chat-header, .chat-input {
    padding: 12px;
  }
  .messages {
    padding: 12px;
  }
}
@media (max-width: 600px) {
  .app-container {
    flex-direction: column;
    height: 100vh;
    width: 100vw;
  }
  .sidebar {
    flex-direction: row;
    width: 100vw;
    height: 56px;
    padding: 0 8px;
    box-shadow: 0 2px 8px var(--shadow);
    border-radius: 0;
    justify-content: flex-start;
    overflow-x: auto;
  }
  .logo {
    width: 40px;
    height: 40px;
    font-size: 1.3rem;
    margin-bottom: 0;
    margin-right: 12px;
  }
  .server-list {
    flex-direction: row;
    gap: 10px;
  }
  .channels {
    flex-direction: row;
    width: 100vw;
    height: 48px;
    padding: 0 8px;
    box-shadow: 0 2px 8px var(--shadow);
    border-radius: 0;
    align-items: center;
    overflow-x: auto;
    display: flex;
  }
  .channels-header {
    display: none;
  }
  .channel-list {
    flex-direction: row;
    gap: 8px;
    width: 100vw;
  }
  .chat {
    border-radius: 0;
    margin: 0;
    min-height: 0;
    flex: 1 1 auto;
  }
  .chat-header, .chat-input {
    padding: 8px;
  }
  .chat-header h2 {
    font-size: 1rem;
  }
  .messages {
    padding: 8px;
    gap: 10px;
  }
  .user-profile {
    width: 100vw;
    min-width: 0;
    border-radius: 0;
    box-shadow: none;
    padding-bottom: 0;
    height: auto;
  }
  .profile-banner-container {
    border-radius: 0;
    height: 80px;
  }
  .profile-avatar-circle {
    width: 72px;
    height: 72px;
  }
  .profile-avatar {
    width: 64px;
    height: 64px;
  }
}

/* Modal Overlay */
.modal {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: none;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  pointer-events: none;
}
.modal-content {
  opacity: 0;
  transform: scale(0.7) translateY(60px);
  transition: opacity 0.35s cubic-bezier(.4,0,.2,1), transform 0.35s cubic-bezier(.4,0,.2,1);
  pointer-events: auto;
  background: var(--background-secondary);
  color: var(--text);
  border-radius: 18px;
  box-shadow: 0 4px 32px var(--shadow);
  padding: 22px 16px 16px 16px;
  width: 100%;
  max-width: 350px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.modal-close {
  position: absolute;
  top: 18px;
  right: 18px;
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 2rem;
  cursor: pointer;
  transition: color 0.2s;
}
.modal-close:hover {
  color: var(--accent);
}
.modal-content h2 {
  font-size: 1.15rem;
  font-weight: 500;
  margin-bottom: 6px;
  text-align: center;
}
.modal-content p {
  font-size: 0.98rem;
  margin-bottom: 16px;
  text-align: center;
}
.icon-upload-area {
  margin-bottom: 24px;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.icon-upload-label {
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.icon-upload-circle {
  width: 56px;
  height: 56px;
  border: 2px dashed var(--accent);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  margin-bottom: 4px;
  background: var(--background);
}
.icon-upload-plus {
  position: absolute;
  top: 8px;
  right: 8px;
  background: var(--accent);
  color: var(--text);
  border-radius: 50%;
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  font-weight: bold;
  box-shadow: 0 2px 8px var(--shadow);
}
.icon-upload-camera {
  font-size: 1.2rem;
  color: var(--accent);
}
.icon-upload-text {
  font-size: 0.92rem;
  font-weight: 500;
  margin-top: 2px;
}
.server-name-label {
  font-size: 0.92rem;
  font-weight: 500;
  margin-bottom: 3px;
  margin-top: 6px;
  align-self: flex-start;
}
.server-name-input {
  width: 100%;
  padding: 8px 10px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--background);
  color: var(--text);
  font-size: 0.98rem;
  margin-bottom: 10px;
  outline: none;
  transition: border 0.2s;
}
.server-name-input:focus {
  border: 1.5px solid var(--accent);
}
.modal-actions {
  display: flex;
  width: 100%;
  justify-content: space-between;
  align-items: center;
  margin-top: 2px;
}
.modal-back {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 0.98rem;
  font-weight: 500;
  cursor: pointer;
  padding: 7px 16px;
  border-radius: 8px;
  transition: color 0.2s, background 0.2s;
}
.modal-back:hover {
  color: var(--accent);
  background: var(--background-tertiary);
}
.modal-create {
  background: var(--accent);
  color: var(--text);
  border: none;
  border-radius: 8px;
  padding: 7px 16px;
  font-size: 0.98rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  opacity: 0.7;
}
.modal-create:enabled {
  opacity: 1;
}
.modal-create:hover:enabled {
  background: var(--accent-hover);
}
@media (max-width: 600px) {
  .modal-content {
    padding: 10px 2vw 10px 2vw;
    max-width: 98vw;
  }
}
.modal.modal-open {
  pointer-events: auto;
}
.modal.modal-open .modal-content {
  opacity: 1;
  transform: scale(1) translateY(0);
}
.modal.modal-closing .modal-content {
  opacity: 0;
  transform: scale(0.7) translateY(60px);
}

/* AUTH OVERLAY STYLES */
.auth-overlay {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  width: 100vw;
  height: 100vh;
  background: var(--background);
  z-index: 2000;
  display: flex;
  flex-direction: row;
  align-items: stretch;
  justify-content: center;
  animation: fadeIn 0.7s cubic-bezier(.4,0,.2,1);
}
.auth-left {
  flex: 1.2;
  background: linear-gradient(120deg, var(--background-tertiary) 60%, var(--background) 100%);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: flex-end;
  padding: 0 5vw 0 0;
  min-width: 320px;
  position: relative;
}
.auth-logo {
  font-size: 2.2rem;
  font-weight: 900;
  color: var(--accent);
  margin-bottom: 32px;
  letter-spacing: 0.2em;
  animation: slideDownFade 0.7s 0.1s both;
}
.auth-heading {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}
.heading-stack {
  position: relative;
  display: inline-block;
}
#auth-heading-top, #auth-heading-bottom {
  display: block;
  font-size: 2.8rem;
  font-weight: 800;
  line-height: 1.1;
  position: static;
  text-align: right;
}
#auth-heading-top {
  color: var(--text);
  transition: color 0.5s;
}
#auth-heading-bottom {
  color: var(--accent);
  opacity: 0;
  transform: translateY(0.2em);
  transition: opacity 0.7s cubic-bezier(.4,0,.2,1), transform 0.7s cubic-bezier(.4,0,.2,1);
}
#auth-heading.show-bottom #auth-heading-bottom {
  opacity: 1;
  transform: translateY(0);
}
#auth-heading.show-bottom #auth-heading-top {
  color: var(--text-secondary);
}
#auth-desc {
  margin-top: 18px;
  transition: margin-top 0.7s cubic-bezier(.4,0,.2,1);
}
#auth-heading.show-bottom ~ #auth-desc {
  margin-top: 32px;
}
.auth-desc {
  font-size: 1.15rem;
  color: var(--text-secondary);
  max-width: 420px;
  text-align: right;
  animation: slideRightFade 0.8s 0.4s both;
}
.auth-right {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  background: var(--background-secondary);
  min-width: 340px;
  box-shadow: -2px 0 16px var(--shadow);
}
.auth-form-container {
  width: 100%;
  max-width: 370px;
  margin: 0 auto;
  background: var(--background-tertiary);
  border-radius: 18px;
  box-shadow: 0 2px 16px var(--shadow);
  padding: 38px 32px 32px 32px;
  animation: fadeInUp 0.8s 0.5s both;
}
.auth-form {
  display: flex;
  flex-direction: column;
  gap: 18px;
}
.auth-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 2px;
  text-align: left;
  animation: fadeInUp 0.7s 0.6s both;
}
.auth-subtitle {
  color: var(--text-secondary);
  font-size: 1.05rem;
  margin-bottom: 10px;
  text-align: left;
  animation: fadeInUp 0.7s 0.7s both;
}
.auth-form label {
  color: var(--text-secondary);
  font-size: 1rem;
  font-weight: 500;
  display: flex;
  flex-direction: column;
  gap: 6px;
  animation: fadeInUp 0.7s 0.8s both;
}
.auth-form input {
  background: var(--background);
  color: var(--text);
  border: 1.5px solid var(--border);
  border-radius: 8px;
  padding: 12px 14px;
  font-size: 1rem;
  margin-top: 2px;
  outline: none;
  transition: border 0.2s;
}
.auth-form input:focus {
  border: 1.5px solid var(--accent);
}
.auth-btn {
  background: var(--accent);
  color: var(--text);
  border: none;
  border-radius: 8px;
  padding: 12px 0;
  font-size: 1.1rem;
  font-weight: 700;
  margin-top: 8px;
  cursor: pointer;
  transition: background 0.2s;
  animation: fadeInUp 0.7s 0.9s both;
}
.auth-btn:hover {
  background: var(--accent-hover);
}
.auth-links {
  display: flex;
  justify-content: flex-end;
  font-size: 0.98rem;
  margin-bottom: 2px;
}
.auth-links a {
  color: var(--accent);
  text-decoration: none;
  transition: color 0.2s;
}
.auth-links a:hover {
  color: var(--accent-hover);
}
.auth-switch {
  text-align: center;
  color: var(--text-secondary);
  font-size: 1rem;
  margin-top: 8px;
  animation: fadeInUp 0.7s 1s both;
}
.auth-switch a {
  color: var(--accent);
  text-decoration: none;
  font-weight: 600;
  margin-left: 4px;
  transition: color 0.2s;
}
.auth-switch a:hover {
  color: var(--accent-hover);
}
.auth-signup {
  display: none;
}
.auth-form.slide-in {
  animation: slideInLeft 0.5s both;
}
.auth-form.slide-out {
  animation: slideOutRight 0.5s both;
}
@media (max-width: 900px) {
  .auth-overlay {
    flex-direction: column;
  }
  .auth-left, .auth-right {
    min-width: 0;
    width: 100vw;
    justify-content: center;
    align-items: center;
    padding: 0;
  }
  .auth-form-container {
    border-radius: 0 0 18px 18px;
    box-shadow: none;
  }
}
@media (max-width: 600px) {
  .auth-heading {
    font-size: 2rem;
    max-width: 90vw;
  }
  .auth-form-container {
    padding: 24px 6vw 24px 6vw;
    max-width: 98vw;
  }
}
/* Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(40px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes slideDownFade {
  from { opacity: 0; transform: translateY(-40px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes slideRightFade {
  from { opacity: 0; transform: translateX(-40px); }
  to { opacity: 1; transform: translateX(0); }
}
@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(60px); }
  to { opacity: 1; transform: translateX(0); }
}
@keyframes slideOutRight {
  from { opacity: 1; transform: translateX(0); }
  to { opacity: 0; transform: translateX(-60px); }
}

.auth-message {
  display: none;
  background: #ffeded;
  color: #d32f2f;
  border: 1.5px solid #d32f2f;
  border-radius: 8px;
  padding: 10px 16px;
  margin-bottom: 18px;
  font-size: 1rem;
  text-align: center;
  animation: fadeIn 0.4s;
}

.spinner {
  width: 48px;
  height: 48px;
  border: 5px solid #b39ddb;
  border-top: 5px solid #fff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

#cropper-modal {
  position: fixed;
  z-index: 3000;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0,0,0,0.85);
  display: block;
  align-items: unset;
  justify-content: unset;
  /* Ensure stacking context for overlays */
  overflow: hidden;
  pointer-events: auto;
}
#cropper-loading {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0,0,0,0.5);
  z-index: 100;
  align-items: center;
  justify-content: center;
}
#cropper-loading.flex {
  display: flex !important;
}

.cropper-modal-content {
  position: relative;
  z-index: 10;
}

.profile-name-input, .profile-bio-input {
  width: 100%;
  font-size: 1.1rem;
  border-radius: 6px;
  border: 1.5px solid var(--border);
  background: var(--background);
  color: var(--text);
  padding: 8px 10px;
  margin-top: 2px;
  outline: none;
  transition: border 0.2s, box-shadow 0.2s;
  opacity: 0;
  transform: translateY(10px);
  pointer-events: none;
  position: relative;
  z-index: 1;
}
.profile-name-input.editing, .profile-bio-input.editing {
  display: block !important;
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
  animation: fadeInUp 0.3s;
}
.profile-name, .profile-bio {
  transition: opacity 0.2s, transform 0.2s;
}
.profile-name.editing, .profile-bio.editing {
  opacity: 0;
  transform: translateY(-10px);
  pointer-events: none;
}
.save-name-btn, .cancel-name-btn, .save-bio-btn, .cancel-bio-btn {
  opacity: 0;
  transform: translateY(10px);
  pointer-events: none;
  margin-left: 6px;
  background: var(--accent);
  color: var(--text);
  border: none;
  border-radius: 6px;
  padding: 4px 12px;
  font-size: 0.98rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s, color 0.2s, opacity 0.2s, transform 0.2s;
}
.save-name-btn.show, .cancel-name-btn.show, .save-bio-btn.show, .cancel-bio-btn.show {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
  animation: fadeInUp 0.3s;
}
.save-name-btn:hover, .save-bio-btn:hover {
  background: var(--accent-hover);
}
.cancel-name-btn, .cancel-bio-btn {
  background: #444;
  color: #fff;
}
.cancel-name-btn:hover, .cancel-bio-btn:hover {
  background: #222;
}

.icon-btn {
  background: var(--background-tertiary);
  color: var(--accent);
  border: none;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  cursor: pointer;
  transition: background 0.2s, color 0.2s, box-shadow 0.2s;
  margin-left: 6px;
  margin-top: 0;
  box-shadow: 0 2px 8px var(--shadow);
}
.icon-btn:hover {
  background: var(--accent);
  color: var(--text);
}
#bio-feedback {
  display: none;
  position: fixed;
  top: 32px;
  right: 32px;
  z-index: 5000;
  background: none;
  box-shadow: none;
  padding: 0;
  border-radius: 50%;
  width: 48px;
  height: 48px;
  pointer-events: none;
}
#bio-feedback.show {
  display: block !important;
  animation: none;
}
#bio-feedback-svg {
  display: block;
  width: 48px;
  height: 48px;
}
#bio-feedback-svg circle {
  stroke-dasharray: 113.097; /* 2 * PI * r (r=18) */
  stroke-dashoffset: 113.097;
  animation: draw-circle 0.5s cubic-bezier(.4,0,.2,1) forwards;
}
#bio-feedback.show #bio-feedback-svg path {
  stroke-dasharray: 24;
  stroke-dashoffset: 24;
  animation: draw-check 0.35s 0.5s cubic-bezier(.4,0,.2,1) forwards;
}
#bio-feedback-svg path {
  stroke-dasharray: 24;
  stroke-dashoffset: 24;
}
@keyframes draw-circle {
  to { stroke-dashoffset: 0; }
}
@keyframes draw-check {
  to { stroke-dashoffset: 0; }
}
.success-popup {
  display: none;
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 100px;
  height: 100px;
  background: none;
  border-radius: 50%;
  box-shadow: none;
  align-items: center;
  justify-content: center;
  z-index: 2001;
  animation: fadeInScale 0.4s cubic-bezier(.4,0,.2,1) forwards;
  overflow: visible;
}
.success-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
  width: 100px;
  height: 100px;
}
#server-success-svg {
  width: 80px;
  height: 80px;
  display: block;
}
#server-success-svg circle {
  stroke-dasharray: 113.097;
  stroke-dashoffset: 113.097;
  animation: draw-circle 0.5s cubic-bezier(.4,0,.2,1) forwards;
}
.success-popup.show #server-success-svg path {
  stroke-dasharray: 24;
  stroke-dashoffset: 24;
  animation: draw-check 0.35s 0.5s cubic-bezier(.4,0,.2,1) forwards;
}
#server-success-svg path {
  stroke-dasharray: 24;
  stroke-dashoffset: 24;
}
@keyframes fadeInScale {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.7);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

.animated-logo {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-end;
  font-size: 4.2rem;
  font-weight: 900;
  letter-spacing: 0.3em;
  margin-bottom: 48px;
  height: 5.2rem;
  position: relative;
}
.animated-logo span {
  display: inline-block;
  opacity: 0;
  transform: translateY(0);
  animation-fill-mode: forwards;
  color: var(--accent);
  text-shadow: 0 4px 24px rgba(179,157,219,0.18);
}
.logo-m {
  animation: logoMIn 0.7s 0.1s cubic-bezier(.4,0,.2,1) forwards;
}
.logo-s {
  animation: logoSIn 0.7s 0.4s cubic-bezier(.4,0,.2,1) forwards;
}
.logo-i {
  animation: logoIIn 0.7s 0.7s cubic-bezier(.4,0,.2,1) forwards;
}
@keyframes logoMIn {
  from { opacity: 0; transform: translateX(-80px) scale(0.7) rotate(-30deg); }
  to   { opacity: 1; transform: translateX(0) scale(1) rotate(0); }
}
@keyframes logoSIn {
  from { opacity: 0; transform: translateY(-80px) scale(0.7) rotate(30deg); }
  to   { opacity: 1; transform: translateY(0) scale(1) rotate(0); }
}
@keyframes logoIIn {
  from { opacity: 0; transform: translateX(80px) scale(0.7) rotate(30deg); }
  to   { opacity: 1; transform: translateX(0) scale(1) rotate(0); }
}

#auth-heading-text {
  display: inline-block;
  transition: all 0.6s cubic-bezier(.4,0,.2,1);
  white-space: nowrap;
  overflow: hidden;
}
#auth-heading.two-lines #auth-heading-text {
  white-space: normal;
  line-height: 1.1;
  opacity: 1;
  transition: all 0.6s cubic-bezier(.4,0,.2,1);
}

.cube-3d-container {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  z-index: 1;
  margin-left: 50px;
}
.scene {
  width: 100px;
  height: 100px;
  perspective: 800px;
}
.pivot {
  transform-origin: 0 0 0;
  animation: rotateCorner 6s infinite linear;
  transform-style: preserve-3d;
}
.cube {
  width: 100px;
  height: 100px;
  position: relative;
  transform-style: preserve-3d;
}
.face {
  position: absolute;
  width: 100px;
  height: 100px;
  border: 2px solid var(--accent);
  box-sizing: border-box;
  background: transparent !important;
}
.front  { transform: translateZ(50px); }
.back   { transform: rotateY(180deg) translateZ(50px); }
.right  { transform: rotateY(90deg) translateZ(50px); }
.left   { transform: rotateY(-90deg) translateZ(50px); }
.top    { transform: rotateX(90deg) translateZ(50px); }
.bottom { transform: rotateX(-90deg) translateZ(50px); }
@keyframes rotateCorner {
  0%   { transform: rotate3d(1, 1, 0, 0deg); }
  100% { transform: rotate3d(1, 1, 0, 360deg); }
}
@media (max-width: 600px) {
  .cube-3d-container {
    width: 54px;
    height: 54px;
    margin-left: 10px;
  }
  .scene, .cube {
    width: 54px;
    height: 54px;
  }
  .face {
    width: 54px;
    height: 54px;
  }
}

/* Position .cube-3d-container in .auth-left */
.auth-left {
  position: relative;
}

/* Server List Styles */
.server-list li {
  list-style: none;
  margin-bottom: 10px;
}

.server-list img {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--accent);
  transition: transform 0.2s;
}

.server-list img:hover {
  transform: scale(1.1);
}

.success-popup::before,
.confetti,
.confetti-piece,
.success-tick,
.success-message {
  display: none !important;
}
@keyframes borderSpin {}
@keyframes confettiBurst {}
@keyframes tickPop {}
@keyframes draw {}

.server-skeleton {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: linear-gradient(90deg, var(--background-tertiary) 25%, var(--background-secondary) 50%, var(--background-tertiary) 75%);
  border: 2px solid var(--accent);
  margin-bottom: 10px;
  animation: server-skeleton-shimmer 1.2s infinite linear;
  background-size: 200% 100%;
}
@keyframes server-skeleton-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}
@media (max-width: 700px) {
  .server-skeleton {
    width: 40px;
    height: 40px;
    margin-bottom: 0;
    margin-right: 10px;
  }
}

/* Remove old .change-banner-btn styles (position: absolute, right, bottom, etc.) and add new styles for .change-banner-btn in .profile-actions */

.profile-actions .change-banner-btn {
  width: 100%;
  background: var(--background-tertiary);
  color: var(--accent);
  border: none;
  border-radius: 8px;
  padding: 10px 0;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
  margin-bottom: 0;
  margin-top: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}
.profile-actions .change-banner-btn:hover {
  background: var(--accent);
  color: var(--text);
}

.friends-btn {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--background-secondary);
  color: var(--accent);
  border: 2px solid var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 18px;
  cursor: pointer;
  transition: background 0.2s, color 0.2s, transform 0.2s;
  box-shadow: 0 2px 8px var(--shadow);
  font-size: 1.3rem;
}
.friends-btn:hover, .friends-btn.active {
  background: var(--accent);
  color: var(--text);
  transform: scale(1.08);
}
@media (max-width: 700px) {
  .friends-btn {
    width: 40px;
    height: 40px;
    margin-bottom: 0;
    margin-right: 10px;
  }
}

.chat-input-animate-in {
  animation: chatInputIn 0.45s cubic-bezier(.4,0,.2,1);
}
@keyframes chatInputIn {
  from {
    opacity: 0;
    transform: translateY(32px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.add-friend-btn {
  background: none;
  border: none;
  color: var(--accent);
  font-size: 1.08rem;
  font-weight: 700;
  cursor: pointer;
  width: 100%;
  padding: 0 0 18px 0;
  margin: 0;
  border-radius: 0;
  box-shadow: none;
  letter-spacing: 0.02em;
  text-align: center;
  position: absolute;
  left: 0;
  bottom: 0;
  transition: color 0.2s;
}
.add-friend-btn:hover {
  color: var(--accent-hover);
  text-decoration: underline;
}

.modal.add-friend-modal {
  display: flex;
  align-items: center;
  justify-content: center;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  z-index: 2000;
  background: rgba(20, 16, 32, 0.82);
  backdrop-filter: blur(6px);
  animation: fadeIn 0.4s cubic-bezier(.4,0,.2,1);
  box-shadow: 0 0 0 2px var(--accent), 0 0 32px 0 var(--accent);
}
.add-friend-modal-content {
  background: var(--background-secondary);
  border-radius: 22px;
  box-shadow: 0 4px 32px var(--shadow), 0 0 0 2px var(--accent);
  padding: 22px 16px 16px 16px;
  min-width: 220px;
  width: 98vw;
  max-width: 350px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  animation: modalPopIn 0.45s cubic-bezier(.4,0,.2,1);
}
@keyframes modalPopIn {
  from { opacity: 0; transform: scale(0.85) translateY(40px); }
  to   { opacity: 1; transform: scale(1) translateY(0); }
}
.add-friend-heading {
  font-size: 1.1rem;
  font-weight: 500;
  margin-bottom: 4px;
}
.add-friend-form {
  gap: 6px;
  margin: 12px 0 10px 0;
}
.add-friend-input {
  background: var(--background-tertiary);
  color: var(--text);
  border: none;
  border-radius: 10px;
  padding: 8px 10px;
  font-size: 0.98rem;
  font-weight: 400;
  outline: none;
  transition: box-shadow 0.2s, border 0.2s;
  box-shadow: 0 2px 8px var(--shadow);
}
.add-friend-input:focus {
  border: 1.5px solid var(--accent);
  box-shadow: 0 2px 16px var(--shadow);
}
.add-friend-send-btn {
  background: #3ec6ff;
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 0 12px;
  font-size: 0.98rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s, transform 0.2s;
  box-shadow: 0 2px 8px var(--shadow);
  margin-left: 8px;
}
.add-friend-send-btn:hover {
  background: #1da1f2;
  transform: scale(1.04);
}
.add-friend-section {
  margin-bottom: 18px;
}
.add-friend-section-title {
  font-weight: 500;
  font-size: 0.98rem;
  margin-bottom: 4px;
  margin-top: 4px;
}
.add-friend-request-row {
  background: var(--background-tertiary);
  border-radius: 12px;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  margin-bottom: 10px;
  font-size: 0.98rem;
  font-weight: 400;
  color: var(--text);
  box-shadow: 0 2px 8px var(--shadow);
}
.add-friend-request-username {
  flex: 1;
}
.add-friend-accept-btn {
  background: #2ecc71;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 5px 10px;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  margin-right: 6px;
  transition: background 0.2s, transform 0.2s;
}
.add-friend-accept-btn:hover {
  background: #27ae60;
  transform: scale(1.04);
}
.add-friend-reject-btn {
  background: #e74c3c;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 5px 10px;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s, transform 0.2s;
}
.add-friend-reject-btn:hover {
  background: #c0392b;
  transform: scale(1.04);
}
.add-friend-request-status {
  font-size: 0.95rem;
  font-weight: 400;
  margin-left: 4px;
}
@media (max-width: 600px) {
  .add-friend-modal-content {
    min-width: 0;
    width: 98vw;
    padding: 10px 2vw 10px 2vw;
  }
}

/* --- Premium WhatsApp-like DM Chat Styles --- */
.dm-message {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  margin-bottom: 4px;
  font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
}
.dm-message.mine {
  align-items: flex-end;
}
.dm-message-bubble-wrapper {
  display: flex;
  align-items: flex-end;
}
.dm-message-bubble {
  background: #fff;
  color: #23272f;
  border-radius: 18px 18px 18px 6px;
  padding: 4px 12px 8px 12px;
  margin-bottom: 2px;
  box-shadow: 0 2px 8px rgba(40,16,80,0.07);
  font-size: 1.06rem;
  max-width: 68vw;
  min-width: 48px;
  min-height: 24px;
  word-break: break-word;
  position: relative;
  cursor: pointer;
  transition: box-shadow 0.18s, transform 0.18s;
  animation: dmMessageInLeft 0.38s cubic-bezier(.4,0,.2,1);
}
.dm-message.mine .dm-message-bubble {
  background: #25D366;
  color: #fff;
  border-radius: 18px 18px 6px 18px;
  animation: dmMessageInRight 0.38s cubic-bezier(.4,0,.2,1);
}
.dm-message-bubble::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 18px;
  width: 0;
  height: 0;
  border-top: 12px solid #fff;
  border-left: 12px solid transparent;
  border-radius: 0 0 0 6px;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.04));
  display: block;
}
.dm-message.mine .dm-message-bubble::after {
  left: auto;
  right: 18px;
  border-top: 12px solid #25D366;
  border-right: 12px solid transparent;
  border-left: none;
  border-radius: 0 0 6px 0;
}
.dm-message-bubble:hover {
  box-shadow: 0 4px 18px rgba(80,32,160,0.13);
  transform: translateY(-2px) scale(1.02);
}
.dm-message-bubble:active {
  background: #f3f3f3;
}
.dm-message-meta {
  font-size: 0.81rem;
  color: #bdbdbd;
  margin-left: 8px;
  margin-top: 0;
  text-align: right;
  display: inline-block;
  user-select: none;
  vertical-align: middle;
}
.dm-message.mine .dm-message-meta {
  color: #e0f7e9;
}
.dm-message-check {
  font-size: 1.1em;
  margin-left: 4px;
  vertical-align: middle;
  color: #bdbdbd;
  transition: color 0.2s;
}
.dm-message.mine .dm-message-check.delivered {
  color: #25D366;
}
.dm-message.mine .dm-message-check.read {
  color: #34B7F1;
}
.dm-message-sender {
  font-size: 0.92rem;
  color: var(--accent);
  font-weight: 500;
  margin-bottom: 2px;
}
.messages {
  background: linear-gradient(135deg, var(--background-tertiary) 90%, var(--background-secondary) 100%);
  min-height: 0;
  flex: 1;
  padding: 24px 0 24px 0;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 6px;
  scroll-behavior: smooth;
}
.chat-input {
  position: sticky;
  bottom: 0;
  background: var(--background-secondary);
  z-index: 10;
  transition: box-shadow 0.2s;
}
.chat-input:focus-within {
  box-shadow: 0 2px 16px var(--accent);
}
.chat-input input[type="text"] {
  flex: 1;
  padding: 12px 16px;
  border-radius: 8px;
  border: none;
  background: var(--background-tertiary);
  color: var(--text);
  font-size: 1rem;
  outline: none;
  transition: background 0.2s, box-shadow 0.2s;
}
.chat-input input[type="text"]:focus {
  background: var(--background);
  box-shadow: 0 0 0 2px var(--accent);
}
.chat-input button {
  background: var(--accent);
  color: var(--text);
  border: none;
  border-radius: 8px;
  padding: 10px 20px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}
.chat-input button:hover {
  background: var(--accent-hover);
}
@media (max-width: 900px) {
  .dm-message-bubble {
    max-width: 90vw;
    font-size: 0.98rem;
    padding: 4px 7px 7px 7px;
  }
}
@media (max-width: 600px) {
  .dm-message-bubble {
    max-width: 98vw;
    font-size: 0.95rem;
    padding: 3px 4px 6px 4px;
  }
}
.dm-message-animate-in {
  /* This class is used to trigger the entry animation for new message bubbles. */
  /* The animation is set by the .dm-message-bubble and .dm-message.mine .dm-message-bubble selectors. */
}

.search-bar-container {
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%) scaleX(0.7);
  opacity: 0;
  width: 0;
  background: var(--background-tertiary);
  box-shadow: 0 4px 24px var(--shadow), 0 0 0 2px var(--accent);
  border-radius: 12px;
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 0 10px;
  height: 40px;
  z-index: 20;
  pointer-events: none;
  transition: width 0.35s cubic-bezier(.4,0,.2,1), opacity 0.25s, transform 0.35s cubic-bezier(.4,0,.2,1);
}
.search-bar-container.active {
  opacity: 1;
  width: 320px;
  transform: translateY(-50%) scaleX(1);
  pointer-events: auto;
}
@media (max-width: 600px) {
  .search-bar-container.active {
    width: 98vw;
    left: 0;
    right: 0;
    border-radius: 0 0 12px 12px;
  }
}
.search-bar-input {
  flex: 1;
  background: var(--background);
  color: var(--text);
  border: 1.5px solid var(--border);
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 1rem;
  outline: none;
  transition: border 0.2s, box-shadow 0.2s;
  min-width: 0;
  border: none;
}
.search-bar-input:focus {
  border: 1.5px solid var(--accent);
  box-shadow: 0 0 0 2px var(--accent);
}
.search-bar-arrow, .search-bar-close {
  background: none;
  border: none;
  color: var(--accent);
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  cursor: pointer;
  transition: background 0.2s, color 0.2s, box-shadow 0.2s;
  margin-left: 0;
  margin-right: 0;
  box-shadow: none;
}
.search-bar-arrow:hover, .search-bar-close:hover {
  background: var(--accent);
  color: var(--text);
}

.search-highlight {
  background: linear-gradient(90deg, var(--accent) 10%, transparent 100%) !important;
  box-shadow: 0 2px 12px var(--accent), 0 0 0 2px var(--accent);
  border-radius: 14px !important;
  transition: background 0.22s, box-shadow 0.22s;
  position: relative;
  z-index: 2;
}
.search-highlight-active {
  box-shadow: 0 0 0 3px var(--accent-hover), 0 2px 16px var(--accent);
  background: linear-gradient(90deg, var(--accent-hover) 20%, transparent 100%) !important;
  border-radius: 16px !important;
}

.chat-attach-btn {
  margin-right: 8px;
  background: var(--background-tertiary);
  color: var(--accent);
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3rem;
  cursor: pointer;
  transition: background 0.2s, color 0.2s, box-shadow 0.2s, transform 0.18s;
  box-shadow: 0 2px 8px var(--shadow);
  outline: none;
  padding: 0;
}
.chat-attach-btn svg {
  width: 22px;
  height: 22px;
  stroke: currentColor;
  fill: none;
  display: block;
}
.chat-attach-btn:hover, .chat-attach-btn:focus {
  background: var(--accent);
  color: var(--text);
  transform: scale(1.08);
  box-shadow: 0 4px 16px var(--accent);
}

.welcome-message {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 20;
  transition: opacity 0.4s;
  opacity: 1;
  pointer-events: auto;
}
.welcome-message.hide {
  opacity: 0;
  pointer-events: none;
}
.welcome-message h2 {
  color: var(--accent);
  margin-top: 18px;
  font-size: 1.3rem;
  font-weight: 600;
  text-align: center;
  letter-spacing: 0.01em;
}

.channels-server-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--accent);
  padding: 12px 8px 8px 0;
  cursor: pointer;
  position: relative;
  z-index: 2;
  margin-top: -20px;
}
.server-dropdown-btn {
  background: none;
  border: none;
  color: var(--accent);
  cursor: pointer;
  margin-left: 6px;
  display: flex;
  align-items: center;
  transition: color 0.2s;
}
.server-dropdown-btn:hover {
  color: var(--accent-hover);
}
.server-dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  background: var(--background-secondary);
  border-radius: 12px;
  box-shadow: 0 8px 32px var(--shadow);
  min-width: 210px;
  z-index: 100;
  padding: 8px 0;
  opacity: 0;
  pointer-events: none;
  transform: translateY(-16px) scale(0.98);
  transition: opacity 0.32s cubic-bezier(.4,0,.2,1), transform 0.32s cubic-bezier(.4,0,.2,1);
  display: block;
}
.server-dropdown-menu.open {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(8px) scale(1.03);
}
.dropdown-option {
  padding: 10px 18px;
  color: var(--text);
  font-size: 1rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 10px;
  transition: background 0.18s;
}
.dropdown-option:hover {
  background: var(--background-tertiary);
}
.dropdown-divider {
  height: 1px;
  background: var(--border);
  margin: 6px 0;
}

.invite-people-option {
  position: relative;
}
.invite-code-tooltip {
  position: absolute;
  left: 100%;
  top: 0;
  transform: none;
  margin-left: 0px;
  min-width: 180px;
  box-shadow: 0 4px 24px 0 rgba(179,157,219,0.18), 0 1.5px 8px 0 rgba(0,0,0,0.12);
  border: 1.5px solid var(--accent);
  border-radius: 8px;
  background: var(--background-tertiary);
  padding: 8px 16px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.22s cubic-bezier(.4,0,.2,1);
  z-index: 300;
  display: block;
}
.invite-people-option:hover .invite-code-tooltip,
.invite-people-option:focus-within .invite-code-tooltip,
.invite-code-tooltip:hover,
.invite-code-tooltip:focus-within {
  opacity: 1;
  pointer-events: auto;
}
.invite-code-tooltip.copied {
  color: #7ed957;
  border-color: #7ed957;
  background: #232129;
}
.invite-code-tooltip .copy-icon {
  margin-left: 8px;
  cursor: pointer;
  color: var(--accent);
  font-size: 1.08em;
  vertical-align: middle;
  transition: color 0.18s;
}
.invite-code-tooltip .copy-icon:hover {
  color: #7ed957;
}

.generate-invite-btn {
  background: var(--accent);
  color: var(--text);
  border: none;
  border-radius: 6px;
  padding: 4px 14px;
  font-size: 0.97rem;
  font-weight: 500;
  margin-left: 10px;
  cursor: pointer;
  box-shadow: 0 1.5px 6px var(--shadow);
  transition: background 0.18s, color 0.18s, transform 0.18s;
  outline: none;
  vertical-align: middle;
}
.generate-invite-btn:hover:not(:disabled),
.generate-invite-btn:focus-visible:not(:disabled) {
  background: var(--accent-hover);
  color: #fff;
  transform: scale(1.06);
}
.generate-invite-btn:active {
  background: #7e57c2;
  color: #fff;
}
.generate-invite-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

/* Stunning join server modal beside profile */
.profile-join-modal {
  position: fixed;
  top: 50%;
  left: calc(50% + 180px); /* right of profile section */
  transform: translateY(-50%) scale(0.92);
  z-index: 3000;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 0;
  min-height: 0;
  pointer-events: auto;
  background: none;
  animation: profileJoinPopIn 0.38s cubic-bezier(.4,0,.2,1);
}
@keyframes profileJoinPopIn {
  from { opacity: 0; transform: translateY(-60%) scale(0.85); }
  to   { opacity: 1; transform: translateY(-50%) scale(1); }
}
.profile-join-modal-content {
  background: rgba(34, 30, 48, 0.92);
  backdrop-filter: blur(12px) saturate(1.2);
  border-radius: 18px;
  box-shadow: 0 4px 32px var(--shadow), 0 0 0 2px var(--accent);
  padding: 32px 28px 24px 28px;
  min-width: 270px;
  max-width: 92vw;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  position: relative;
  animation: profileJoinContentPop 0.44s cubic-bezier(.4,0,.2,1);
}
@keyframes profileJoinContentPop {
  from { opacity: 0; transform: scale(0.85) translateY(40px); }
  to   { opacity: 1; transform: scale(1) translateY(0); }
}
.profile-join-modal-content h2 {
  color: var(--accent);
  font-size: 1.18rem;
  font-weight: 700;
  margin-bottom: 18px;
  text-align: center;
}
.profile-join-input {
  background: var(--background-tertiary);
  color: var(--text);
  border: none;
  border-radius: 10px;
  padding: 10px 12px;
  font-size: 1.02rem;
  margin-bottom: 16px;
  outline: none;
  box-shadow: 0 2px 8px var(--shadow);
  transition: box-shadow 0.2s, border 0.2s;
}
.profile-join-input:focus {
  border: 1.5px solid var(--accent);
  box-shadow: 0 2px 16px var(--shadow);
}
.profile-join-confirm-btn {
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 10px 0;
  font-size: 1.05rem;
  font-weight: 600;
  cursor: pointer;
  margin-bottom: 10px;
  box-shadow: 0 2px 8px var(--shadow);
  transition: background 0.2s, transform 0.2s;
}
.profile-join-confirm-btn:hover {
  background: var(--accent-hover);
  transform: scale(1.04);
}
.profile-join-modal-close {
  position: absolute;
  top: 10px;
  right: 14px;
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 1.3rem;
  font-weight: 700;
  cursor: pointer;
  z-index: 10;
  transition: color 0.2s;
}
.profile-join-modal-close:hover {
  color: var(--accent);
}
.profile-join-feedback {
  min-height: 22px;
  text-align: center;
  font-size: 1.01rem;
  font-weight: 500;
  color: var(--accent);
  margin-top: 2px;
  opacity: 0;
  transition: opacity 0.3s;
}
.profile-join-feedback.show {
  opacity: 1;
}

/* --- Server Settings Panel (Full Screen) --- */
.server-settings-panel {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  width: 100vw;
  height: 100vh;
  z-index: 99999;
  display: flex;
  background: rgba(20, 18, 28, 0.98);
  backdrop-filter: blur(16px) saturate(1.2);
  animation: serverSettingsFadeIn 0.38s cubic-bezier(.4,0,.2,1);
}
@keyframes serverSettingsFadeIn {
  from { opacity: 0; transform: translateY(40px) scale(0.98); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}
.server-settings-sidebar {
  width: 260px;
  background: rgba(24, 22, 36, 0.98);
  border-right: 1.5px solid var(--border);
  display: flex;
  flex-direction: column;
  padding: 36px 0 36px 0;
  box-shadow: 2px 0 16px var(--shadow);
  min-width: 180px;
}
.server-settings-title {
  color: var(--accent);
  font-size: 1.08rem;
  font-weight: 700;
  letter-spacing: 1.2px;
  margin-left: 32px;
  margin-bottom: 18px;
  opacity: 0.85;
}
.server-settings-nav {
  list-style: none;
  padding: 0 0 0 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.server-settings-nav li {
  color: var(--text-secondary);
  font-size: 1.08rem;
  font-weight: 500;
  padding: 10px 32px;
  border-radius: 8px 0 0 8px;
  cursor: pointer;
  transition: background 0.18s, color 0.18s;
  user-select: none;
}
.server-settings-nav li.active, .server-settings-nav li:hover {
  background: var(--background-tertiary);
  color: var(--accent);
}
.server-settings-divider {
  color: var(--text-secondary);
  font-size: 0.92rem;
  font-weight: 600;
  margin: 18px 0 6px 32px;
  opacity: 0.6;
  letter-spacing: 1.1px;
}
.server-settings-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 48px 48px 48px 48px;
  min-width: 0;
  position: relative;
}
.server-settings-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 32px;
}
.server-settings-section-title {
  color: var(--accent);
  font-size: 1.25rem;
  font-weight: 700;
  letter-spacing: 1.1px;
}
.server-settings-close {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 2.1rem;
  font-weight: 700;
  cursor: pointer;
  padding: 0 18px;
  border-radius: 8px;
  transition: color 0.2s, background 0.2s;
  display: flex;
  align-items: center;
  gap: 8px;
}
.server-settings-close:hover {
  color: var(--accent);
  background: var(--background-tertiary);
}
.esc-label {
  font-size: 1.01rem;
  color: var(--text-secondary);
  opacity: 0.7;
  margin-left: 2px;
}
.server-settings-content {
  background: rgba(34, 30, 48, 0.98);
  border-radius: 18px;
  box-shadow: 0 4px 32px var(--shadow);
  padding: 36px 38px 32px 38px;
  min-width: 340px;
  max-width: 540px;
  margin-bottom: 18px;
  animation: serverSettingsContentPop 0.44s cubic-bezier(.4,0,.2,1);
}
@keyframes serverSettingsContentPop {
  from { opacity: 0; transform: scale(0.97) translateY(40px); }
  to   { opacity: 1; transform: scale(1) translateY(0); }
}
.server-settings-content h2 {
  color: var(--accent);
  font-size: 1.18rem;
  font-weight: 700;
  margin-bottom: 18px;
}
.server-settings-desc {
  color: var(--text-secondary);
  font-size: 1.01rem;
  margin-bottom: 18px;
}
.server-settings-label {
  color: var(--text-secondary);
  font-size: 1.01rem;
  font-weight: 600;
  margin-top: 18px;
  margin-bottom: 6px;
  display: block;
}
.server-settings-name-input {
  background: var(--background-tertiary);
  color: var(--text);
  border: none;
  border-radius: 10px;
  padding: 10px 12px;
  font-size: 1.02rem;
  margin-bottom: 8px;
  outline: none;
  box-shadow: 0 2px 8px var(--shadow);
  transition: box-shadow 0.2s, border 0.2s;
  width: 100%;
}
.server-settings-name-input:focus {
  border: 1.5px solid var(--accent);
  box-shadow: 0 2px 16px var(--shadow);
}
.server-settings-icon-row {
  display: flex;
  align-items: center;
  gap: 18px;
  margin-bottom: 18px;
}
.server-settings-icon-preview {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  object-fit: cover;
  background: var(--background-secondary);
  border: 2.5px solid var(--accent);
  box-shadow: 0 2px 8px var(--shadow);
}
.server-settings-icon-btn {
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 10px 18px;
  font-size: 1.05rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 2px 8px var(--shadow);
  transition: background 0.2s, transform 0.2s;
}
.server-settings-icon-btn:hover {
  background: var(--accent-hover);
  transform: scale(1.04);
}
.server-settings-banner-row {
  display: flex;
  gap: 12px;
  margin-bottom: 18px;
  flex-wrap: wrap;
}
.server-settings-banner-color {
  width: 48px;
  height: 36px;
  border-radius: 10px;
  cursor: pointer;
  border: 2.5px solid transparent;
  box-shadow: 0 2px 8px var(--shadow);
  transition: border 0.2s, transform 0.2s;
}
.server-settings-banner-color.selected {
  border: 2.5px solid var(--accent);
  transform: scale(1.08);
}
.server-settings-save-row {
  display: flex;
  align-items: center;
  gap: 18px;
  margin-top: 18px;
}
.server-settings-save-btn {
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 10px 24px;
  font-size: 1.08rem;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 2px 8px var(--shadow);
  transition: background 0.2s, transform 0.2s;
}
.server-settings-save-btn:hover {
  background: var(--accent-hover);
  transform: scale(1.04);
}
.server-settings-feedback {
  min-width: 80px;
  min-height: 22px;
  text-align: left;
  font-size: 1.01rem;
  font-weight: 500;
  color: var(--accent);
  opacity: 0;
  transition: opacity 0.3s;
}
.server-settings-feedback.show {
  opacity: 1;
}
.server-settings-preview {
  width: 370px;
  min-width: 270px;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: 48px 32px 48px 0;
}
.server-settings-preview-card {
  background: linear-gradient(135deg, #232129 60%, #18171d 100%);
  border-radius: 22px;
  box-shadow: 0 4px 32px var(--shadow);
  padding: 0;
  width: 100%;
  max-width: 340px;
  min-height: 210px;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: hidden;
  position: relative;
}
.server-settings-preview-banner {
  width: 100%;
  height: 70px;
  background: #232129;
  border-radius: 22px 22px 0 0;
  position: relative;
}
.server-settings-preview-icon {
  width: 56px;
  height: 56px;
  border-radius: 16px;
  background: var(--background);
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 38px;
  left: 50%;
  transform: translateX(-50%);
  box-shadow: 0 2px 8px var(--shadow);
  border: 2.5px solid var(--accent);
}
.server-settings-preview-icon img {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  object-fit: cover;
}
.server-settings-preview-name {
  margin-top: 38px;
  font-size: 1.13rem;
  font-weight: 700;
  color: var(--text);
  text-align: center;
}
.server-settings-preview-meta {
  color: var(--online);
  font-size: 0.98rem;
  margin-top: 6px;
  text-align: center;
}
.server-settings-preview-date {
  color: var(--text-secondary);
  font-size: 0.93rem;
  margin-top: 2px;
  text-align: center;
}
@media (max-width: 1100px) {
  .server-settings-panel {
    flex-direction: column;
  }
  .server-settings-sidebar {
    width: 100vw;
    min-width: 0;
    flex-direction: row;
    overflow-x: auto;
    border-right: none;
    border-bottom: 1.5px solid var(--border);
    padding: 0 0 0 0;
  }
  .server-settings-main {
    padding: 32px 12px 32px 12px;
  }
  .server-settings-preview {
    padding: 32px 0 32px 0;
    width: 100vw;
    min-width: 0;
  }
}
@media (max-width: 700px) {
  .server-settings-panel {
    flex-direction: column;
    padding: 0;
  }
  .server-settings-sidebar {
    width: 100vw;
    min-width: 0;
    flex-direction: row;
    overflow-x: auto;
    border-right: none;
    border-bottom: 1.5px solid var(--border);
    padding: 0 0 0 0;
  }
  .server-settings-main {
    padding: 18px 2vw 18px 2vw;
  }
  .server-settings-preview {
    padding: 18px 0 18px 0;
    width: 100vw;
    min-width: 0;
  }
}

/* --- Server Members Section (Server Settings) --- */
.server-settings-section-members {
  min-width: 340px;
  max-width: 700px;
  margin-bottom: 18px;
}
.server-members-info-banner {
  display: flex;
  align-items: center;
  background: linear-gradient(90deg, #5a6cff 60%, #7b8fff 100%);
  color: #fff;
  border-radius: 14px;
  padding: 18px 24px;
  margin-bottom: 28px;
  box-shadow: 0 2px 12px var(--shadow);
  position: relative;
  min-height: 64px;
}
.server-members-info-img {
  width: 48px;
  height: 48px;
  margin-right: 18px;
  border-radius: 12px;
  background: #fff2;
  object-fit: contain;
}
.server-members-info-text {
  flex: 1;
  font-size: 1.05rem;
  font-weight: 500;
  line-height: 1.4;
}
.server-members-info-close {
  background: none;
  border: none;
  color: #fff;
  font-size: 1.5rem;
  font-weight: 700;
  cursor: pointer;
  margin-left: 18px;
  opacity: 0.7;
  transition: opacity 0.2s;
}
.server-members-info-close:hover {
  opacity: 1;
}
.server-members-table-controls {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 10px;
}
.server-members-table-title {
  font-size: 1.08rem;
  font-weight: 600;
  color: var(--text-secondary);
  margin-right: 18px;
}
.server-members-search {
  flex: 1;
  background: var(--background-tertiary);
  color: var(--text);
  border: none;
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 1.01rem;
  outline: none;
  box-shadow: 0 2px 8px var(--shadow);
  transition: box-shadow 0.2s, border 0.2s;
  min-width: 120px;
}
.server-members-search:focus {
  border: 1.5px solid var(--accent);
  box-shadow: 0 2px 16px var(--shadow);
}
.server-members-sort-btn, .server-members-prune-btn {
  background: var(--background-tertiary);
  color: var(--accent);
  border: none;
  border-radius: 8px;
  padding: 8px 16px;
  font-size: 1.01rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
}
.server-members-sort-btn:hover, .server-members-prune-btn:hover {
  background: var(--accent);
  color: #fff;
}
.server-members-table-wrapper {
  background: rgba(34, 30, 48, 0.98);
  border-radius: 14px;
  box-shadow: 0 2px 12px var(--shadow);
  padding: 0 0 0 0;
  overflow-x: auto;
}
.server-members-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: 1.01rem;
  color: var(--text);
  margin-bottom: 0;
}
.server-members-table thead tr {
  background: none;
  color: var(--text-secondary);
  font-size: 0.98rem;
  font-weight: 700;
}
.server-members-table th, .server-members-table td {
  padding: 12px 10px;
  text-align: left;
  border-bottom: 1.5px solid var(--border);
  vertical-align: middle;
}
.server-members-table th:first-child, .server-members-table td:first-child {
  width: 36px;
  text-align: center;
}
.server-members-table th:last-child, .server-members-table td:last-child {
  text-align: right;
}
.server-members-table tbody tr {
  transition: background 0.18s;
}
.server-members-table tbody tr:hover {
  background: var(--background-secondary);
}
.server-members-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
  margin-right: 10px;
  background: var(--background-tertiary);
  display: inline-block;
  vertical-align: middle;
}
.server-members-name {
  font-weight: 600;
  color: var(--text);
  display: flex;
  align-items: center;
  gap: 8px;
}
.server-members-username {
  color: var(--text-secondary);
  font-size: 0.97rem;
  font-weight: 400;
  margin-left: 2px;
}
.server-members-roles {
  color: var(--accent);
  font-size: 0.97rem;
  font-weight: 500;
}
.server-members-count {
  color: var(--text-secondary);
  font-size: 0.98rem;
  margin: 12px 0 12px 10px;
}
@media (max-width: 900px) {
  .server-settings-section-members {
    max-width: 98vw;
    padding: 0 2vw;
  }
  .server-members-info-banner {
    flex-direction: column;
    align-items: flex-start;
    padding: 14px 10px;
  }
  .server-members-info-img {
    margin-bottom: 8px;
    margin-right: 0;
  }
  .server-members-table-controls {
    flex-wrap: wrap;
    gap: 8px;
  }
  .server-members-table-wrapper {
    padding: 0;
  }
}

.engagement-placeholder-card {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  background: linear-gradient(90deg, #232129 60%, #b39ddb22 100%);
  border-radius: 16px;
  box-shadow: 0 2px 12px var(--shadow);
  padding: 28px 32px;
  margin: 32px 0 0 0;
  min-height: 110px;
  gap: 28px;
}
.engagement-placeholder-img {
  width: 64px;
  height: 64px;
  border-radius: 16px;
  background: #fff2;
  object-fit: contain;
  box-shadow: 0 2px 8px var(--shadow);
}
.engagement-placeholder-text {
  font-size: 1.13rem;
  color: var(--text-secondary);
  font-weight: 500;
  line-height: 1.5;
}
@media (max-width: 900px) {
  .engagement-placeholder-card {
    flex-direction: column;
    align-items: flex-start;
    padding: 18px 10px;
    gap: 14px;
  }
  .engagement-placeholder-img {
    margin-bottom: 8px;
  }
}

.engagement-stats-row {
  display: flex;
  gap: 28px;
  margin-bottom: 32px;
}
.engagement-stat-card {
  background: linear-gradient(90deg, #232129 60%, #b39ddb22 100%);
  border-radius: 14px;
  box-shadow: 0 2px 12px var(--shadow);
  padding: 24px 36px;
  min-width: 180px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  gap: 8px;
}
.engagement-stat-card .stat-label {
  color: var(--text-secondary);
  font-size: 1.01rem;
  font-weight: 500;
  margin-bottom: 2px;
}
.engagement-stat-card .stat-value {
  color: var(--accent);
  font-size: 2.1rem;
  font-weight: 800;
  letter-spacing: 1.2px;
}
.engagement-charts-row {
  display: flex;
  gap: 28px;
  margin-bottom: 32px;
  flex-wrap: wrap;
}
.engagement-chart-card {
  background: rgba(34, 30, 48, 0.98);
  border-radius: 14px;
  box-shadow: 0 2px 12px var(--shadow);
  padding: 24px 28px 18px 28px;
  min-width: 320px;
  max-width: 100%;
  flex: 1 1 320px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  overflow-x: auto;
  height: 220px;
  position: relative;
}
.engagement-chart-card canvas {
  width: 100% !important;
  height: 160px !important;
  max-height: 160px;
  display: block;
  position: absolute;
  left: 0; right: 0; bottom: 0; top: 40px;
}
.chart-title {
  color: var(--text-secondary);
  font-size: 1.08rem;
  font-weight: 600;
  margin-bottom: 10px;
}
.engagement-most-active {
  background: rgba(34, 30, 48, 0.98);
  border-radius: 14px;
  box-shadow: 0 2px 12px var(--shadow);
  padding: 24px 28px 18px 28px;
  margin-top: 18px;
}
.most-active-members-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 14px;
}
.most-active-members-list li {
  display: flex;
  align-items: center;
  gap: 14px;
  font-size: 1.05rem;
  color: var(--text);
  font-weight: 500;
  background: var(--background-tertiary);
  border-radius: 8px;
  padding: 10px 16px;
  box-shadow: 0 1px 4px var(--shadow);
}
.most-active-members-list .active-member-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
  background: var(--background-secondary);
}
.most-active-members-list .active-member-name {
  font-weight: 700;
  color: var(--accent);
}
.most-active-members-list .active-member-count {
  margin-left: auto;
  color: var(--text-secondary);
  font-size: 0.98rem;
  font-weight: 600;
}
@media (max-width: 900px) {
  .engagement-stats-row, .engagement-charts-row {
    flex-direction: column;
    gap: 18px;
  }
  .engagement-stat-card, .engagement-chart-card, .engagement-most-active {
    min-width: 0;
    width: 100%;
    padding: 18px 10px;
  }
}

.server-settings-section-engagement {
  min-width: 540px;
  max-width: 900px;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  background: linear-gradient(135deg, #5f5fff 0%, #b16cff 50%, #ff6fcb 100%);
  animation: gloryBgAnim 12s ease-in-out infinite alternate;
  box-shadow: 0 4px 32px #5f5fff22, 0 2px 8px #ff6fcb22;
}
@media (max-width: 1100px) {
  .server-settings-section-engagement {
    min-width: 0;
    max-width: 98vw;
    padding: 0 2vw;
  }
}
.server-settings-section-engagement::before, .server-settings-section-engagement::after {
  content: '';
  position: absolute;
  width: 100%; height: 100%;
  pointer-events: none;
  background: url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="2" fill="white" opacity="0.7"/><circle cx="80" cy="30" r="1.5" fill="white" opacity="0.5"/><circle cx="50" cy="80" r="2.5" fill="white" opacity="0.6"/></svg>') repeat;
  animation: sparkles 20s linear infinite;
  z-index: 0;
}
.server-settings-section-engagement::after {
  animation-direction: reverse;
  opacity: 0.5;
}
.server-settings-section-engagement > * {
  position: relative;
  z-index: 1;
}

/* --- Guild Glory Voting System Styles --- */
.glory-hero {
  text-align: center;
  margin-top: 20px;
  margin-bottom: 30px;
}
.glory-title {
  font-size: 2.2rem;
  font-weight: 900;
  letter-spacing: 2px;
  text-shadow: 0 4px 32px #fff3, 0 1px 0 #fff8;
  animation: titlePop 1s cubic-bezier(.68,-0.55,.27,1.55);
}
@keyframes titlePop {
  0% { transform: scale(0.7) translateY(-40px); opacity: 0; }
  100% { transform: scale(1) translateY(0); opacity: 1; }
}
.glory-subtitle {
  font-size: 1.1rem;
  margin-top: 10px;
  color: #fff9;
  animation: subtitleFade 1.2s 0.2s both;
}
@keyframes subtitleFade {
  0% { opacity: 0; transform: translateY(20px); }
  100% { opacity: 1; transform: translateY(0); }
}
.glory-progress-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 40px;
}
.glory-progress-bar-container {
  position: relative;
  width: 100%;
  max-width: 420px;
  margin: 30px 0 20px 0;
}
.glory-progress-bar-bg {
  width: 100%;
  height: 18px;
  background: #fff2;
  border-radius: 12px;
  position: relative;
  box-shadow: 0 2px 16px #0002;
  overflow: visible;
}
.glory-progress-bar-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #ff6fcb, #5f5fff);
  border-radius: 12px;
  box-shadow: 0 0 16px 4px #ff6fcb88, 0 0 32px 8px #5f5fff44;
  transition: width 0.7s cubic-bezier(.68,-0.55,.27,1.55);
}
.glory-milestone {
  position: absolute;
  top: 50%;
  width: 36px; height: 36px;
  background: #fff;
  border-radius: 50%;
  border: 4px solid #b16cff;
  box-shadow: 0 0 16px #b16cff88;
  transform: translateY(-50%);
  z-index: 2;
  transition: background 0.3s;
  display: flex; align-items: center; justify-content: center;
  font-weight: bold;
  font-size: 1.1rem;
}
#milestone1 { left: 10%; }
#milestone2 { left: 45%; }
#milestone3 { left: 80%; }
.glory-milestone.unlocked {
  background: linear-gradient(135deg, #ff6fcb, #5f5fff);
  color: #fff;
  border-color: #fff;
  box-shadow: 0 0 32px #ff6fcbcc, 0 0 16px #5f5fff99;
  animation: milestonePop 0.7s;
}
@keyframes milestonePop {
  0% { transform: scale(0.7) translateY(-50%); }
  80% { transform: scale(1.2) translateY(-50%); }
  100% { transform: scale(1) translateY(-50%); }
}
.glory-avatars {
  position: absolute;
  left: 0; right: 0; top: -50px;
  height: 40px;
  display: flex;
  align-items: center;
  pointer-events: none;
  z-index: 3;
}
.glory-avatar {
  width: 36px; height: 36px;
  border-radius: 50%;
  border: 2px solid #fff;
  margin-right: -10px;
  box-shadow: 0 2px 8px #0004;
  background: #fff;
  object-fit: cover;
  opacity: 0;
  transform: scale(0.7);
  animation: avatarFlyIn 0.7s forwards;
}
@keyframes avatarFlyIn {
  0% { opacity: 0; transform: scale(0.7) translateY(-30px); }
  100% { opacity: 1; transform: scale(1) translateY(0); }
}
.glory-vote-btn {
  margin-top: 30px;
  padding: 14px 38px;
  font-size: 1.1rem;
  font-weight: 700;
  border: none;
  border-radius: 32px;
  background: linear-gradient(90deg, #ff6fcb, #5f5fff);
  color: #fff;
  box-shadow: 0 4px 24px #ff6fcb44, 0 2px 8px #5f5fff33;
  cursor: pointer;
  transition: background 0.3s, transform 0.2s;
  outline: none;
  position: relative;
  overflow: hidden;
}
.glory-vote-btn:active {
  transform: scale(0.97);
}
.glory-vote-btn.voted {
  background: #2ecc71;
  color: #fff;
  pointer-events: none;
  animation: btnVoted 0.5s;
}
@keyframes btnVoted {
  0% { background: #ff6fcb; }
  100% { background: #2ecc71; }
}
.glory-vote-info {
  margin-top: 12px;
  color: #fff8;
  font-size: 1rem;
}
.glory-milestones {
  display: flex;
  justify-content: center;
  gap: 22px;
  margin: 40px 0 0 0;
  flex-wrap: wrap;
}
.glory-milestone-card {
  background: #fff1;
  border-radius: 24px;
  box-shadow: 0 2px 16px #0002;
  padding: 28px 18px 18px 18px;
  min-width: 180px;
  max-width: 220px;
  text-align: center;
  transition: box-shadow 0.3s, background 0.3s;
  position: relative;
  overflow: hidden;
}
.glory-milestone-card h2 {
  font-size: 1.2rem;
  margin-bottom: 6px;
  color: #fff;
}
.glory-milestone-card p {
  color: #ff6fcb;
  font-weight: bold;
  margin-bottom: 12px;
}
.glory-milestone-card ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
.glory-milestone-card li {
  font-size: 1rem;
  margin: 8px 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  color: #fff;
}
.perk-icon {
  font-size: 1.2em;
  filter: drop-shadow(0 2px 4px #ff6fcb88);
}
.glory-milestone-card.locked {
  background: #fff2;
  color: #fff7;
  filter: grayscale(0.7);
}
.glory-milestone-card.unlocked {
  background: linear-gradient(135deg, #ff6fcb 0%, #5f5fff 100%);
  color: #fff;
  box-shadow: 0 0 32px #ff6fcbcc, 0 0 16px #5f5fff99;
  animation: cardUnlock 0.7s;
}
@keyframes cardUnlock {
  0% { transform: scale(0.7) rotateY(30deg); }
  80% { transform: scale(1.1) rotateY(-10deg); }
  100% { transform: scale(1) rotateY(0); }
}
.glory-perk-unlock {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  z-index: 100;
}
@media (max-width: 900px) {
  .glory-milestones {
    flex-direction: column;
    align-items: center;
    gap: 18px;
  }
  .glory-progress-bar-container {
    width: 95vw;
    max-width: 98vw;
  }
}
@media (max-width: 600px) {
  .glory-title { font-size: 1.3rem; }
  .glory-milestone-card { padding: 14px 4px; min-width: 120px; }
  .glory-progress-bar-container { margin: 10px 0 6px 0; }
}

/* --- Guild Glory Voting System Section Width & Background --- */
.server-settings-section-boost {
  min-width: 540px;
  max-width: 900px;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  background: linear-gradient(135deg, #5f5fff 0%, #b16cff 50%, #ff6fcb 100%);
  animation: gloryBgAnim 12s ease-in-out infinite alternate;
  box-shadow: 0 4px 32px #5f5fff22, 0 2px 8px #ff6fcb22;
}
@media (max-width: 1100px) {
  .server-settings-section-boost {
    min-width: 0;
    max-width: 98vw;
    padding: 0 2vw;
  }
}
@keyframes gloryBgAnim {
  0% { background-position: 0% 50%; filter: hue-rotate(0deg); }
  50% { background-position: 100% 50%; filter: hue-rotate(30deg); }
  100% { background-position: 0% 50%; filter: hue-rotate(60deg); }
}
/* Optionally, add floating sparkles */
.server-settings-section-boost::before, .server-settings-section-boost::after {
  content: '';
  position: absolute;
  width: 100%; height: 100%;
  pointer-events: none;
  background: url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="2" fill="white" opacity="0.7"/><circle cx="80" cy="30" r="1.5" fill="white" opacity="0.5"/><circle cx="50" cy="80" r="2.5" fill="white" opacity="0.6"/></svg>') repeat;
  animation: sparkles 20s linear infinite;
  z-index: 0;
}
.server-settings-section-boost::after {
  animation-direction: reverse;
  opacity: 0.5;
}
@keyframes sparkles {
  0% { background-position: 0 0; }
  100% { background-position: 100px 200px; }
}
/* Ensure content is above background */
.server-settings-section-boost > * {
  position: relative;
  z-index: 1;
}
/* Make progress bar and milestones wider */
.server-settings-section-boost .glory-progress-bar-container {
  max-width: 700px;
  width: 90%;
}
.server-settings-section-boost .glory-milestones {
  max-width: 900px;
  width: 100%;
  justify-content: space-between;
}
